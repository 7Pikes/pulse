#!/usr/bin/env ruby

unless ARGV[0] =~ /(start|stop|status)/
  puts "Usage: bin/frontend {start|stop|status}"
  exit 1
end

root_path = File.dirname(File.expand_path('../', __FILE__))

case ARGV[0]
when 'start'
  system "cd #{root_path} && unicorn -c config/unicorn.conf -D"
when 'stop'
  system "cat #{root_path}/tmp/daemons/frontend.pid | xargs kill -QUIT"
when 'status'
  (system "ps -p `cat #{root_path}/tmp/daemons/frontend.pid | xargs` &> /dev/null") ? "Running" : "Not running"
end

